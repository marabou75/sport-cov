# .github/workflows/ping.yml
name: Uptime Ping
on:
  schedule:
    - cron: "*/30 * * * *"      # toutes les 30 min (exemple)
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render
        env:
          RENDER_HOST: ${{ secrets.RENDER_HOST }}   # <-- secret GitHub
        run: |
          if [ -z "$RENDER_HOST" ]; then
            echo "Secret RENDER_HOST manquant"; exit 1
          fi
          curl -fsS --max-time 15 --retry 3 --retry-all-errors \
            "https://${RENDER_HOST}/health" > /dev/null
          echo "Ping OK"
